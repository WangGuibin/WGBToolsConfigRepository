# !/bin/bash

showMenu() {

 echo "/**
 *     
 *  NO BUG !      	
 * 			
 */"
	echo "======================================"
	echo "è¯·é€‰æ‹©éœ€è¦æ‰§è¡Œçš„å‘½ä»¤é€‰é¡¹"
	echo "0. è¾“å‡º hello world "
	echo "1. å®‰è£…homebrew"
	echo "2. å®‰è£…cocoapods"
	echo "3. å¸è½½é‡è£…cocoapods"
	echo "4. å®‰è£…oh-my-zsh"
	echo "5. å®‰è£…carthage"
	echo "6. æ—¥å¸¸æäº¤gitä»£ç "
	echo "7. å‘å¸ƒæ›´æ–°podç»„ä»¶"
	echo "8. git blameæŸ¥è¯¢ä»£ç å½’å±äºº"
	echo "9. æŸ¥è¯¢æŒ‡å®šè·¯å¾„ä¸‹iOSä»£ç è¡Œæ•°"
	echo "10. æŸ¥è¯¢å½“å‰ç½‘ç»œipåœ°å€"
	echo "11. æ¸…é™¤ç»ˆç«¯ä»£ç†è®¾ç½®"
	echo "12. å†…ç½‘ç©¿é€,ç”¨äºå¤–ç½‘è®¿é—®æ¼”ç¤ºé¢„è§ˆ(é’‰é’‰ç©¿é€)"
	echo "13. è§£å†³MacAppç¬¬ä¸€æ¬¡å®‰è£…æ‰“å¼€æç¤ºå·²æŸå,ç§»åˆ°åºŸçº¸ç¯“å¼¹çª—" 
	echo "14. è§£å†³MacAppç¬¬ä¸€æ¬¡å®‰è£…æ‰“å¼€é—ªé€€é—®é¢˜"

	echo "======================================"
	
	read -p "è¾“å…¥é€‰é¡¹ç¼–å·ï¼š" number
	case $number in 
		0) helloWorld	
		;;
			
		1) installbrew
		;;
		
		2) installCocoapods
		;;

		3) unInstallCocoapods
		;;
		
		4) installOhMyZsh
		;;

		5) installCarthage
		;;

		6) commitGitRecord 
		;;

		7) publishUpdatePodSpecs
		;;

		8) gitblameCode
		;;

		9) totaliOSCodeRows
		;;

		10) searchCurrentNetworkIPAddress
		;;

		11) cleanProxySettings
		;;

		12) crossNetworkToDingDing
		;;

		13) fixedAppDestroyed
		;;

		14) resignMacApp 
		;;
		
	esac	
	#é€’å½’è°ƒç”¨
	# showMenu
}


helloWorld() {
	echo "hello wor1d"
}

installbrew() {
	if ! type "brew" > /dev/null; then
		echo "å°†è¦å¼€å§‹å®‰è£…brew"
		/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
	else
		echo "å·²ç»å®‰è£…homebrew"
	fi
}

installCocoapods() {
	sudo gem install cocoapods
}

unInstallCocoapods() {
	sudo gem list --local | grep cocoapods

	sudo gem uninstall cocoapods
	
	sudo gem uninstall cocoapods-core
	
	sudo gem uninstall cocoapods-downloader
	
	sudo gem uninstall cocoapods-plugins
	
	sudo gem uninstall cocoapods-search
	
	sudo gem uninstall cocoapods-stats
	
	sudo gem uninstall cocoapods-trunk
	
	sudo gem uninstall cocoapods-try

	sudo gem uninstall cocoapods-deintegrate

	sudo gem install cocoapods 

	pod setup
}

installOhMyZsh() {
	sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"
}

installCarthage() {
	brew update
	brew install carthage
}

commitGitRecord() {
	read -p "è¾“å…¥æäº¤æ—¥å¿—ä¿¡æ¯: " commit_message
	read -p "è¾“å…¥åˆ†æ”¯å(é»˜è®¤ä¸ºdevåˆ†æ”¯): " branch_name

	if [[ -n "$commit_message" ]]; then
		#statements
		echo "æ—¥å¿—ä¿¡æ¯å‚æ•°ä¸º: $commit_message"
	else
		echo "æ—¥å¿—ä¿¡æ¯å‚æ•°ä¸ºç©ºï¼Œå·²ä½¿ç”¨é»˜è®¤æ¨¡æ¿: ğŸš€update~"
		commit_message="ğŸš€update~"
	fi

	if [[ -n "$branch_name" ]]; then
		#statements
		echo "åˆ†æ”¯åå‚æ•°ä¸º: $branch_name "
	else
		echo "åˆ†æ”¯åå‚æ•°æœªè¾“å…¥,é»˜è®¤ä¸ºdev"
		branch_name="dev"
	fi

	git add .
	git commit -am  "$commit_message"
	git push origin ${branch_name}
}

publishUpdatePodSpecs() {
	echo "å‚æ•°ç¼ºä¸€ä¸å¯,è¯·æŒ‰è¦æ±‚å¡«å†™~"
	read -p "è¾“å…¥æäº¤æ—¥å¿—ä¿¡æ¯(æœ‰å­—å°±è¡Œ): " commit_message
	read -p "è¾“å…¥ç‰ˆæœ¬å·(å’Œ.podspecæ–‡ä»¶é‡Œçš„ç‰ˆæœ¬å·ä¿æŒä¸€è‡´): " version_number
	read -p "è¾“å…¥ç»„ä»¶podspec_nameåå­—(å½¢å¦‚xxx.podspecéœ€åç¼€): " podspec_name

	if [[ -n "$commit_message" ]]; then
		#statements
		echo "æ—¥å¿—ä¿¡æ¯å‚æ•°ä¸º: $commit_message"
	else
		echo "æ—¥å¿—ä¿¡æ¯å‚æ•°ä¸ºç©º"
		commit_message="update~"
	fi

	if [[ -n "$version_number" ]]; then
		#statements
		echo "ç‰ˆæœ¬å·å‚æ•°ä¸º: $version_number "
	else
		echo "ç‰ˆæœ¬å·å‚æ•°æœªè¾“å…¥"
	fi

	if [[ -n "$podspec_name" ]]; then
		#statements
		echo "ç»„ä»¶åå­—å‚æ•°ä¸º: $version_number "
	else
		echo "è¯·å¡«å†™ç»„ä»¶podspec_nameåå­—(å½¢å¦‚xxx.podspec):"
	fi

	git add .
	git commit -am  "$commit_message"
	git tag  $version_number
	git push origin master --tags
	pod trunk push ./$podspec_name --allow-warnings --verbose

}

gitblameCode() {
	echo "æŸ¥è¯¢ä»£ç å½’å±äºº,å‚æ•°è¯·æŒ‰è¦æ±‚å¡«å†™~"
	read -p "è¾“å…¥ä»£ç æ–‡ä»¶è·¯å¾„: " code_path
	read -p "è¾“å…¥ä»£ç è¡Œæ•°èµ·ç‚¹: " code_start_row
	read -p "è¾“å…¥ä»£ç è¡Œæ•°ç»ˆç‚¹: " code_end_row

	git blame -L ${code_start_row},${code_end_row} ${code_path}  
}

totaliOSCodeRows() {
	read -p "è¾“å…¥ä»£ç æ–‡ä»¶æ‰€åœ¨è·¯å¾„: " code_path

	find ${code_path} "(" -name "*.h" -or -name "*.mm" -or -name "*.m" -or -name "*.swift" ")" -print | xargs wc -l 
}

searchCurrentNetworkIPAddress() {
	curl http://ifconfig.me/ip
}

cleanProxySettings(){
 export http_proxy=""
 export https_proxy=""
 export HTTP_PROXY=""
 export HTTPS_PROXY=""
 echo "ğŸš€ğŸš€http_proxyå·²æ¸…ç©º~"
 echo "ğŸš€ğŸš€https_proxyå·²æ¸…ç©º~"
 echo "ğŸš€ğŸš€HTTP_PROXYå·²æ¸…ç©º~"
 echo "ğŸš€ğŸš€HTTPS_PROXYå·²æ¸…ç©º~"
}

crossNetworkToDingDing(){
	ding -config=/Users/wangguibin/MyShell/ding.cfg -subdomain=coderwgb 8080
}


fixedAppDestroyed(){
	# ä¿®å¤Appå·²æŸåé—®é¢˜
	read -p "è¾“å…¥MacAppæ‰€åœ¨è·¯å¾„:(ä¾‹å¦‚:'/Applications/xxx.app')" app_path
	# MacOS Catalina æ‰“å¼€app æç¤ºå·²æŸå
	sudo xattr -d com.apple.quarantine app_path
	echo "ğŸ‰ğŸ‰ğŸ‰ å·²ç»ä¿®å¤å·²æŸåæ‰“ä¸å¼€çš„é—®é¢˜,é‡æ–°æ‰“å¼€Appå°è¯•ğŸ‰ğŸ‰ğŸ‰"
	echo "æ‰“å¼€ https://xclient.info/a/b4d2370e-f0e0-8011-aa0e-81391ad11d1f.html äº†è§£æ›´å¤šè§£å†³æ–¹æ³•"
}

resignMacApp(){
	# TNTè¯ä¹¦é—®é¢˜è¢«è‹¹æœåˆ é™¤çš„åŸå› ,å¯¼è‡´Macåº”ç”¨é—ªé€€
	read -p "è¾“å…¥MacAppæ‰€åœ¨è·¯å¾„:(ä¾‹å¦‚:'/Applications/xxx.app')" app_path
	# å…ˆç§»é™¤åŸæœ‰çš„ç­¾å
	codesign --remove-signature app_path
	# ç­¾å
	codesign --force --deep --sign - app_path
	echo "ğŸ‰ğŸ‰ğŸ‰ å·²ç»å®ŒæˆMacAppé‡ç­¾,é‡æ–°æ‰“å¼€å°è¯•å§ğŸ‰ğŸ‰ğŸ‰"
	echo "æ‰“å¼€ https://xclient.info/a/b4d2370e-f0e0-8011-aa0e-81391ad11d1f.html äº†è§£æ›´å¤šè§£å†³æ–¹æ³•"
}

####################################################
showMenu


