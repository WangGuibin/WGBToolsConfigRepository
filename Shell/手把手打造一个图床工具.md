## å‡†å¤‡å·¥ä½œ
1. githubä»“åº“ + `github_token` [ç”Ÿæˆtokenä¹‹åå¤‡ä»½å¥½](https://github.com/settings/tokens)
2. `Alfred` è½¯ä»¶ [æ”¯æŒæ­£ç‰ˆ,ç›—ç‰ˆå¯è€»ğŸ˜„](https://www.alfredapp.com)
3. `Shell`è„šæœ¬,Macè‡ªå¸¦çš„bashå³å¯,ç”¨åˆ°`curl`å·¥å…·

è„šæœ¬å¦‚ä¸‹:

```bash

filePath=$1 # /Users/mac/Desktop/1.jpg æ–‡ä»¶è·¯å¾„ æ˜¯é€šè¿‡Alfredé€‰ä¸­äº‹ä»¶ä¼ å…¥è¿›æ¥çš„

fileName=`date +%Y%m%d%H%M%S`.${filePath##*.} #æ—¶é—´åˆ°ç§’+è·¯å¾„æˆªå–æ‹¼æ¥æ–‡ä»¶å é˜²æ­¢é‡å¤

CommitMsg="Macé€šè¿‡Shellè„šæœ¬ä¸Šä¼ äº†ä¸€å¼ å›¾ç‰‡"$fileName #æäº¤ä¿¡æ¯å¯è‡ªå®šä¹‰

echo<<EOF
$userName githubç”¨æˆ·å
$repoName ä»“åº“å
$path  è·¯å¾„åå³å­˜æ”¾å›¾ç‰‡çš„ç›®å½•
$github_token githubç”Ÿæˆçš„token

EOF

#è¾“å‡ºç»“æœ é‡‡ç”¨jsdelivrçš„å…è´¹åŠ é€ŸæœåŠ¡
Target_Img_URL="https://cdn.jsdelivr.net/gh/$userName/$repoName/$path/"$fileName

#æ–‡ä»¶base64ç¼–ç  ä¸æ¢è¡Œ
Base64_Content=$(base64 -b 0 $filePath)  

#githubå¼€å‘çš„APIæ¥å£
API_URL="https://api.github.com/repos/$userName/$repoName/contents/$path/"${fileName}

Acess_Token="token $github_token"

# å‘èµ·PUTç½‘ç»œè¯·æ±‚ -Xæ˜¯æŒ‡å®šæ–¹æ³•ç±»å‹ -Hæ˜¯headerå‚æ•°å¯ä»¥ä¼ å¤šä¸ª -d æ˜¯ä¼ jsonå‚æ•° å•å¼•å·shellä¸èƒ½å…¥å‚æ‰€ä»¥åªèƒ½è½¬ä¹‰
result=$(curl \
  -X PUT \
  -H "Content-Type:application/json"\
  -H "Authorization:$Acess_Token" \
  -H "Accept:application/vnd.github.raw"\
  ${API_URL} \
  -d "{\"message\":\"${CommitMsg}\",\"content\":\"${Base64_Content}\"}")

#å› ä¸ºè¿”å›ç»“æœæ˜¯ä¸€å †jsonæ•°æ® ä½†åªæœ‰æˆåŠŸçš„æ—¶å€™æ‰ä¼šè¿”å›committerå­—æ®µ æ‰€ä»¥åŒ¹é…ä¸€ä¸‹ç”¨äºåˆ¤æ–­
IsUpload=`echo $result | grep "committer"`
if [[ -n "$IsUpload" ]]; then
	#å°†ç»“æœæ‹·è´è‡³å‰ªè´´æ¿ 
	echo $Target_Img_URL | pbcopy
	#å¦‚æœéœ€è¦markdownæ¨¡å¼åˆ™æ‰“å¼€å¦‚ä¸‹ä»£ç æ³¨é‡Šå³å¯
	#echo "![]($Target_Img_URL)" | pbcopy

	#å‘èµ·AppleScriptè„šæœ¬é€šçŸ¥äº‹ä»¶ 
	osascript -e "display notification \"$Target_Img_URL\" with title \"é€šçŸ¥\" subtitle \"ä¸Šä¼ æˆåŠŸ,åœ°å€å·²æ‹·è´è‡³å‰ªè´´æ¿\""
fi
#å¦‚æ­¤å°±å¤§åŠŸå‘Šæˆäº†! 

```

## Alfredè®¾ç½®ç›¸å…³
![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/20210124213912.png)

å¦‚å›¾æ–°å»ºä¸€ä¸ªç©ºç™½çš„`blank workflow`ç„¶ååŠ `Hotkey`å’Œ`Run Script`,è®¾ç½®å¯¹åº”çš„å¿«æ·é”®ä»¥åŠè„šæœ¬è°ƒç”¨

è®¾ç½®å¿«æ·é”®å¦‚å›¾:
![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/20210124214231.png)

è®¾ç½®è„šæœ¬è°ƒç”¨å¦‚å›¾:
![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/20210124214257.png)

ç„¶åæ˜¯é…ç½®å˜é‡åˆ—è¡¨(ç»“åˆè„šæœ¬å’Œä¸‹å›¾ç†è§£),å¯¼å‡ºå¯æ¸…ç©ºå­—æ®µå€¼å‹¾é€‰ä¸Šä¸è‡³äºç§å¯†æ•°æ®tokenä¹‹ç±»çš„æ³„æ¼æˆ–è€…å…±äº«(è¿™ä¸ªåŠŸèƒ½å¾ˆé“¶æåŒ–)
![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/20210124214503.png)

æœ€åæ˜¯å¤§åŠŸå‘Šæˆäº†!
![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/20210124214725.png)

è™½ç„¶æˆ‘è§‰å¾—`PicGo`+`TyPora`æ•ˆç‡ä¹Ÿå¾ˆé«˜,ä½†æ˜¯è¿™ä¸ªæ˜¯è‡ªå·±äº²æ‰‹å†™å‡ºæ¥çš„å·¥å…·è¿˜æ˜¯è¦å˜šç‘Ÿå˜šç‘Ÿçš„~ å“ˆå˜¿~ 

## å‚è€ƒåšå®¢
[Alfred Workflow ä¸€é”®ä¸Šä¼ å›¾ç‰‡åˆ°github](https://www.cnblogs.com/osinger/p/12025315.html)
[å¦‚ä½•åˆ¶ä½œä¸€ä¸ªæ‰‹æœºä¸Šçš„Githubå›¾åºŠæ·å¾„(workflow)](https://www.cnblogs.com/wgb1234/p/13660900.html)
[PicGo](https://github.com/Molunerfinn/PicGo)
